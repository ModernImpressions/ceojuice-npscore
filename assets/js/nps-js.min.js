(function(){function t(){var t=$(window).scrollTop(),e=$(".scoreGauge").height(),a=$(".scoreGauge").offset().top,r=a+e;t>=a&&t<=r?$(".scoreGauge").addClass("in-view"):$(".scoreGauge").removeClass("in-view")}function e(){$(".scoreGauge").hasClass("in-view")&&f.animateOn(o,C)}var a,r,n,s,i,o,c,d,h,l,u,p,g,f,m,M,v,w,C,G,I,P,A,L,O,b,k;for(C=initVal/100,i=40,m=5,A=1/m/2,M=.05,c=10,b=.75,h=d3.select(".chart-gauge"),g={top:20,right:20,bottom:30,left:20},k=h[0][0].offsetWidth-g.left-g.right,u=k/2,G=Math.min(k,u),v=function(t){return 360*t},w=function(t){return d(v(t))},d=function(t){return t*Math.PI/180},O=h.append("svg").attr("width","100%").attr("height","100%").attr("preserveAspectRatio","xMinYMin meet"),o=O.append("g").attr("transform",`translate(${(k+g.left+g.right)/2}, ${u+g.top+g.bottom-20})`),P=p=1,I=m;1<=I?p<=I:p>=I;P=1<=I?++p:--p)s=w(b),n=s+w(A),b+=A,L=0===P?0:M/2,l=P===m?0:M/2,r=d3.svg.arc().outerRadius(G-c).innerRadius(G-c-i).startAngle(s+L).endAngle(n-l),o.append("path").attr("class",`arc chart-color${P}`).attr("d",r);a=class{constructor(t,e){this.len=t,this.radius=e}drawOn(t,e){return t.append("circle").attr("class","needle-center").attr("cx",0).attr("cy",0).attr("r",this.radius),t.append("path").attr("class","needle").attr("d",this.mkCmd(e))}animateOn(t,e){var a;return a=this,t.transition().delay(500).ease("elastic").duration(6e3).selectAll(".needle").tween("progress",function(){return function(t){var r;return r=t*e,d3.select(this).attr("d",a.mkCmd(r))}})}mkCmd(t){var e,a,r,n,s,i,o,c,d;return o=w(t/2),e=0,a=0,c=e-this.len*Math.cos(o),d=a-this.len*Math.sin(o),r=e-this.radius*Math.cos(o-Math.PI/2),n=a-this.radius*Math.sin(o-Math.PI/2),s=e-this.radius*Math.cos(o+Math.PI/2),i=a-this.radius*Math.sin(o+Math.PI/2),`M ${r} ${n} L ${c} ${d} L ${s} ${i}`}},$(".scoreGauge").attr("style",`height: ${u+g.top+g.bottom}px;`),f=new a(k/2-10,10),f.drawOn(o,0),window.addEventListener("scroll",t),t(),window.addEventListener("scroll",e)}).call(this);