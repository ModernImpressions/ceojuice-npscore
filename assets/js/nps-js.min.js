(function(){function t(){C=document.querySelectorAll(".scoreGauge"),E=window.innerHeight}function e(){for(var t=0;t<C.length;t++){var e=C[t],a=C[t].getBoundingClientRect().top;e.classList.contains("played")||a-E<=0&&(e.classList.add("fade-in-element"),e.classList.add("in-view"),e.classList.remove("hidden"),f.animateOn(d,L),e.classList.add("played"))}}var a,n,r,i,s,d,o,c,h,l,u,p,g,f,m,w,M,v,L,y,O,b,A,I,P,x,C,E,R;for(L=initVal/100,s=40,m=5,A=1/m/2,w=.05,o=10,x=.75,h=d3.select(".chart-gauge"),g={top:20,right:20,bottom:30,left:20},R=h[0][0].offsetWidth-g.left-g.right,u=R/2,y=Math.min(R,u),M=function(t){return 360*t},v=function(t){return c(M(t))},c=function(t){return t*Math.PI/180},P=h.append("svg").attr("width","100%").attr("height","100%").attr("preserveAspectRatio","xMinYMin meet"),d=P.append("g").attr("transform",`translate(${(R+g.left+g.right)/2}, ${u+g.top+g.bottom-20})`),b=p=1,O=m;1<=O?p<=O:p>=O;b=1<=O?++p:--p)i=v(x),r=i+v(A),x+=A,I=0===b?0:w/2,l=b===m?0:w/2,n=d3.svg.arc().outerRadius(y-o).innerRadius(y-o-s).startAngle(i+I).endAngle(r-l),d.append("path").attr("class",`arc chart-color${b}`).attr("d",n);a=class{constructor(t,e){this.len=t,this.radius=e}drawOn(t,e){return t.append("circle").attr("class","needle-center").attr("cx",0).attr("cy",0).attr("r",this.radius),t.append("path").attr("class","needle").attr("d",this.mkCmd(e))}animateOn(t,e){var a;return a=this,t.transition().delay(500).ease("bounce").duration(6e3).selectAll(".needle").tween("progress",function(){return function(t){var n;return n=t*e,d3.select(this).attr("d",a.mkCmd(n))}})}mkCmd(t){var e,a,n,r,i,s,d,o,c;return d=v(t/2),e=0,a=0,o=e-this.len*Math.cos(d),c=a-this.len*Math.sin(d),n=e-this.radius*Math.cos(d-Math.PI/2),r=a-this.radius*Math.sin(d-Math.PI/2),i=e-this.radius*Math.cos(d+Math.PI/2),s=a-this.radius*Math.sin(d+Math.PI/2),`M ${n} ${r} L ${o} ${c} L ${i} ${s}`}},$(".scoreGauge").attr("style",`height: ${u+g.top+g.bottom}px;`),f=new a(R/2-10,10),f.drawOn(d,0),window.addEventListener("scroll",e),window.addEventListener("resize",t),window.addEventListener("resize",a.drawOn(d,0)),t(),e(),window.addEventListener("resize",function(){$(".scoreGauge").attr("style",`height: ${u+g.top+g.bottom}px;`),R=h[0][0].offsetWidth-g.left-g.right,u=R/2,y=Math.min(R,u),f=new a(R/2-10,10),f.drawOn(d,0)})}).call(this);